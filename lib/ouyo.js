!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("OUYO",[],e):"object"==typeof exports?exports.OUYO=e():n.OUYO=e()}(this,function(){return function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t={};return e.m=n,e.c=t,e.d=function(n,t,i){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:i})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t(1);t.d(e,"Engine",function(){return i.a});var r=t(4);t.d(e,"component",function(){return r.a})},function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.d(e,"a",function(){return u});var r=t(2),o=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=function(){function n(){i(this,n),this.entities=null,this.dirtyEntites=[],this.queries=[],this.systems=[],this.componentIdMap=[],this.componentsCount=0,this.onEntityKeyChange=this.onEntityKeyChange.bind(this)}return o(n,[{key:"createEntity",value:function(){var n=new r.a(this.componentsCount,this.componentIdMap,this.onEntityKeyChange);return n.next=this.entities,this.entities=n,n}},{key:"removeEntity",value:function(n){var e=n.next;null!==n.next&&(n.next.prev=n.prev,n.next=null),null!==n.prev&&(n.prev.next=n.next,n.prev=null),(this.entities=n)&&(this.entities=e)}},{key:"onEntityKeyChange",value:function(n){this.dirtyEntites.push(n)}}]),n}()},function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.d(e,"a",function(){return u});var r=t(3),o=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=function(){function n(e,t,o){i(this,n),this.components=[];for(var u=0;u<e;u++)this.components.push(null);this.componentIdMap=t,this.key=new r.a(e),this.prev=null,this.next=null,this.keyChangeAnnounced=!1,this.onKeyChanged=o}return o(n,[{key:"add",value:function(n){var e=this.getIndexById(n._id);if(this.components[e])throw new Error("Cannot add another instance of the same component.");return this.key.setBit(e,!0),this.components[e]=n,this.onChange(),this}},{key:"has",value:function(n){var e=this.getIndexById(n.id);return!!this.components[e]}},{key:"get",value:function(n){var e=this.getIndexById(n.id),t=this.components[e];if(!t)throw new Error("Requested component is not present.");return t}},{key:"remove",value:function(n){var e=this.getIndexById(n.id),t=this.components[e];if(!t)throw new Error("Cannot remove component instance, because it doesn't  exist on target entity.");return n.destroy(t),this.key.setBit(e,!1),this.components[e]=null,this.onChange(),this}},{key:"onChange",value:function(){this.keyChangeAnnounced||this.onKeyChanged(this),this.keyChangeAnnounced=!0}},{key:"resetOnKeyChanged",value:function(){this.keyChangeAnnounced=!1}},{key:"getIndexById",value:function(n){var e=this.componentIdMap[n];if(void 0===e)throw new Error("Unknown component passed as argument. Components not included in queries should be manually registered using Engine.registerComponent().");return e}}]),n}()},function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.d(e,"a",function(){return a});for(var r=(function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}()),o=31,u=[],s=0;s<o;s++)u[s]=Math.pow(2,s);var a=function(){function n(e){i(this,n),this.values=[];for(var t=0;t<e/o;t++)this.values.push(0)}return r(n,[{key:"set",value:function(n){return this.setBit(n,!0),this}},{key:"unset",value:function(n){return this.setBit(n,!1),this}},{key:"setBit",value:function(n,e){for(var t=0;n>=o;)t++,n-=o;var i=0!=(this.values[t]&u[n]);e&&!i?this.values[t]+=u[n]:!e&&i&&(this.values[t]-=u[n])}},{key:"matches",value:function(n){for(var e=0;e<n.values.length;e++){var t=this.values[e]||0,i=n.values[e];if((t&i)!==i)return!1}return!0}}]),n}()},function(n,e,t){"use strict";function i(n,e){var t=r++;return n.id=t,n.prototype._id=t,n.destroy=function(n){e&&e.apply(n)},n}e.a=i;var r=0}])});
//# sourceMappingURL=ouyo.js.map