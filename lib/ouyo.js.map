{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///ouyo.js","webpack:///webpack/bootstrap 833b366967ce045f9a03","webpack:///./src/engine.js","webpack:///./src/entity.js","webpack:///./src/key.js","webpack:///./src/component.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__engine__","__WEBPACK_IMPORTED_MODULE_1__component__","_classCallCheck","instance","Constructor","TypeError","Engine","__WEBPACK_IMPORTED_MODULE_0__entity__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","entities","dirtyEntites","queries","systems","componentIdMap","componentsCount","onEntityKeyChange","bind","entity","next","prev","push","Entity","__WEBPACK_IMPORTED_MODULE_0__key__","componentCount","onKeyChanged","components","keyChangeAnnounced","component","index","getIndexById","_id","Error","setBit","onChange","Component","id","destroy","componentId","undefined","Key","KEY_BITS","POWERS","Math","pow","values","valueIndex","previousValue","other","currentValue","otherValue","objectConstructor","objectDestructor","apply"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,OAAA,UAAAH,GACA,gBAAAC,SACAA,QAAA,KAAAD,IAEAD,EAAA,KAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAV,WAUA,OANAK,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,GAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAtB,GACA,GAAAe,GAAAf,KAAAuB,WACA,WAA2B,MAAAvB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAK,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,GAGAvB,IAAAwB,EAAA,KDgBM,SAAU7B,EAAQ8B,EAAqBzB,GAE7C,YACAY,QAAOC,eAAeY,EAAqB,cAAgBC,OAAO,GAC7C,IAAIC,GAAwC3B,EAAoB,EACpDA,GAAoBQ,EAAEiB,EAAqB,SAAU,WAAa,MAAOE,GAAyC,GAC9H,IAAIC,GAA2C5B,EAAoB,EACvDA,GAAoBQ,EAAEiB,EAAqB,YAAa,WAAa,MAAOG,GAA4C,KAMnJ,SAAUjC,EAAQ8B,EAAqBzB,GAE7C,YAKA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJjFhC,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOQ,IAC9E,IAAIC,GAAwClC,EAAoB,GACjFmC,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMC,OAAQpC,IAAK,CAAE,GAAIqC,GAAaF,EAAMnC,EAAIqC,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAW1B,cAAe,EAAU,SAAW0B,KAAYA,EAAWC,UAAW,GAAM7B,OAAOC,eAAewB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUT,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBL,EAAYV,UAAWsB,GAAiBC,GAAaR,EAAiBL,EAAaa,GAAqBb,ME7FnhBE,EAAb,WACE,QAAAA,KAAcJ,EAAA/B,KAAAmC,GACZnC,KAAK+C,SAAW,KAChB/C,KAAKgD,gBACLhD,KAAKiD,WACLjD,KAAKkD,WACLlD,KAAKmD,kBACLnD,KAAKoD,gBAAkB,EAEvBpD,KAAKqD,kBAAoBrD,KAAKqD,kBAAkBC,KAAKtD,MATzD,MAAAqC,GAAAF,IAAAS,IAAA,eAAAhB,MAAA,WAaI,GAAM2B,GAAS,GAAInB,GAAA,EACjBpC,KAAKoD,gBACLpD,KAAKmD,eACLnD,KAAKqD,kBAKP,OAHAE,GAAOC,KAAOxD,KAAK+C,SACnB/C,KAAK+C,SAAWQ,EAETA,KArBXX,IAAA,eAAAhB,MAAA,SAwBe2B,GACX,GAAMC,GAAOD,EAAOC,IAED,QAAhBD,EAAOC,OACRD,EAAOC,KAAKC,KAAOF,EAAOE,KAC1BF,EAAOC,KAAO,MAGG,OAAhBD,EAAOE,OACRF,EAAOE,KAAKD,KAAOD,EAAOC,KAC1BD,EAAOE,KAAO,OAGbzD,KAAK+C,SAAWQ,KACjBvD,KAAK+C,SAAWS,MAtCtBZ,IAAA,oBAAAhB,MAAA,SA0CoB2B,GAChBvD,KAAKgD,aAAaU,KAAKH,OA3C3BpB,MFyJM,SAAUtC,EAAQ8B,EAAqBzB,GAE7C,YAKA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJjFhC,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOgC,IAC9E,IAAIC,GAAqC1D,EAAoB,GAC9EmC,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMC,OAAQpC,IAAK,CAAE,GAAIqC,GAAaF,EAAMnC,EAAIqC,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAW1B,cAAe,EAAU,SAAW0B,KAAYA,EAAWC,UAAW,GAAM7B,OAAOC,eAAewB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUT,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBL,EAAYV,UAAWsB,GAAiBC,GAAaR,EAAiBL,EAAaa,GAAqBb,MG9JnhB0B,EAAb,WACE,QAAAA,GAAYE,EAAgBV,EAAgBW,GAAc/B,EAAA/B,KAAA2D,GACxD3D,KAAK+D,aACL,KAAI,GAAI1D,GAAI,EAAGA,EAAIwD,EAAgBxD,IACjCL,KAAK+D,WAAWL,KAAK,KAEvB1D,MAAKmD,eAAiBA,EACtBnD,KAAK4C,IAAM,GAAIgB,GAAA,EAAIC,GAEnB7D,KAAKyD,KAAO,KACZzD,KAAKwD,KAAO,KAEZxD,KAAKgE,oBAAqB,EAC1BhE,KAAK8D,aAAeA,EAbxB,MAAAzB,GAAAsB,IAAAf,IAAA,MAAAhB,MAAA,SAgBMqC,GACF,GAAMC,GAAQlE,KAAKmE,aAAaF,EAAUG,IAC1C,IAAGpE,KAAK+D,WAAWG,GACjB,KAAM,IAAIG,OAAM,qDAKlB,OAHArE,MAAK4C,IAAI0B,OAAOJ,GAAO,GACvBlE,KAAK+D,WAAWG,GAASD,EACzBjE,KAAKuE,WACEvE,QAxBX4C,IAAA,MAAAhB,MAAA,SA2BM4C,GACF,GAAMN,GAAQlE,KAAKmE,aAAaK,EAAUC,GAC1C,SAAOzE,KAAK+D,WAAWG,MA7B3BtB,IAAA,MAAAhB,MAAA,SAgCM4C,GACF,GAAMN,GAAQlE,KAAKmE,aAAaK,EAAUC,IACpCR,EAAYjE,KAAK+D,WAAWG,EAClC,KAAID,EACF,KAAM,IAAII,OAAM,sCAElB,OAAOJ,MAtCXrB,IAAA,SAAAhB,MAAA,SAyCS4C,GACL,GAAMN,GAAQlE,KAAKmE,aAAaK,EAAUC,IACpCR,EAAYjE,KAAK+D,WAAWG,EAClC,KAAID,EACF,KAAM,IAAII,OAAM,gFAMlB,OAJAG,GAAUE,QAAQT,GAClBjE,KAAK4C,IAAI0B,OAAOJ,GAAO,GACvBlE,KAAK+D,WAAWG,GAAS,KACzBlE,KAAKuE,WACEvE,QAnDX4C,IAAA,WAAAhB,MAAA,WAuDQ5B,KAAKgE,oBACPhE,KAAK8D,aAAa9D,MAEpBA,KAAKgE,oBAAqB,KA1D9BpB,IAAA,oBAAAhB,MAAA,WA8DI5B,KAAKgE,oBAAqB,KA9D9BpB,IAAA,eAAAhB,MAAA,SAiEe+C,GACX,GAAMT,GAAQlE,KAAKmD,eAAewB,EAClC,QAAaC,KAAVV,EACD,KAAM,IAAIG,OAAM,2IAGlB,OAAOH,OAvEXP,MH6PM,SAAU9D,EAAQ8B,EAAqBzB,GAE7C,YAIA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAHjFhC,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOkD,II/PnG,KAAI,GJgQAxC,IAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAInC,GAAI,EAAGA,EAAImC,EAAMC,OAAQpC,IAAK,CAAE,GAAIqC,GAAaF,EAAMnC,EAAIqC,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAW1B,cAAe,EAAU,SAAW0B,KAAYA,EAAWC,UAAW,GAAM7B,OAAOC,eAAewB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUT,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBL,EAAYV,UAAWsB,GAAiBC,GAAaR,EAAiBL,EAAaa,GAAqBb,OInQ1hB6C,EAAW,GAEXC,KACE1E,EAAI,EAAGA,EAAIyE,EAAUzE,IAC3B0E,EAAO1E,GAAP2E,KAAAC,IAAY,EAAK5E,EAGnB,IAAawE,GAAb,WACE,QAAAA,GAAYpC,GAAQV,EAAA/B,KAAA6E,GAClB7E,KAAKkF,SACL,KAAI,GAAI7E,GAAI,EAAGA,EAAIoC,EAASqC,EAAUzE,IACpCL,KAAKkF,OAAOxB,KAAK,GAJvB,MAAArB,GAAAwC,IAAAjC,IAAA,MAAAhB,MAAA,SAQMsC,GAEF,MADAlE,MAAKsE,OAAOJ,GAAO,GACZlE,QAVX4C,IAAA,QAAAhB,MAAA,SAaQsC,GAEJ,MADAlE,MAAKsE,OAAOJ,GAAO,GACZlE,QAfX4C,IAAA,SAAAhB,MAAA,SAkBSsC,EAAOtC,GAEZ,IADA,GAAIuD,GAAa,EACXjB,GAASY,GACbK,IACAjB,GAASY,CAGX,IAAMM,GAA8D,IAA7CpF,KAAKkF,OAAOC,GAAcJ,EAAOb,GACrDtC,KAAUwD,EACXpF,KAAKkF,OAAOC,IAAeJ,EAAOb,IACzBtC,GAASwD,IAClBpF,KAAKkF,OAAOC,IAAeJ,EAAOb,OA7BxCtB,IAAA,UAAAhB,MAAA,SAiCUyD,GACN,IAAI,GAAIhF,GAAI,EAAGA,EAAIgF,EAAMH,OAAOzC,OAAQpC,IAAK,CAC3C,GAAMiF,GAAetF,KAAKkF,OAAO7E,IAAM,EACjCkF,EAAaF,EAAMH,OAAO7E,EAChC,KAAIiF,EAAeC,KAAgBA,EACjC,OAAO,EAGX,OAAO,MAzCXV,MJgUM,SAAUhF,EAAQ8B,EAAqBzB,GAE7C,YKvUO,SAAS+D,GAAUuB,EAAmBC,GAC3C,GAAMhB,GAAKP,GAUX,OATAsB,GAAkBf,GAAKA,EACvBe,EAAkBjE,UAAU6C,IAAMK,EAElCe,EAAkBd,QAAU,SAAS1C,GAChCyD,GACDA,EAAiBC,MAAM1D,IAIpBwD,EAbT7D,EAAA,EAAAsC,CAAA,IAAIC,GAAQ","file":"ouyo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__engine__ = __webpack_require__(1);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Engine\", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__component__ = __webpack_require__(4);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"component\", function() { return __WEBPACK_IMPORTED_MODULE_1__component__[\"a\"]; });\n\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Engine; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__entity__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Engine = function () {\n  function Engine() {\n    _classCallCheck(this, Engine);\n\n    this.entities = null;\n    this.dirtyEntites = [];\n    this.queries = [];\n    this.systems = [];\n    this.componentIdMap = [];\n    this.componentsCount = 0;\n\n    this.onEntityKeyChange = this.onEntityKeyChange.bind(this);\n  }\n\n  _createClass(Engine, [{\n    key: 'createEntity',\n    value: function createEntity() {\n      var entity = new __WEBPACK_IMPORTED_MODULE_0__entity__[\"a\" /* Entity */](this.componentsCount, this.componentIdMap, this.onEntityKeyChange);\n      entity.next = this.entities;\n      this.entities = entity;\n\n      return entity;\n    }\n  }, {\n    key: 'removeEntity',\n    value: function removeEntity(entity) {\n      var next = entity.next;\n\n      if (entity.next !== null) {\n        entity.next.prev = entity.prev;\n        entity.next = null;\n      }\n\n      if (entity.prev !== null) {\n        entity.prev.next = entity.next;\n        entity.prev = null;\n      }\n\n      if (this.entities = entity) {\n        this.entities = next;\n      }\n    }\n  }, {\n    key: 'onEntityKeyChange',\n    value: function onEntityKeyChange(entity) {\n      this.dirtyEntites.push(entity);\n    }\n  }]);\n\n  return Engine;\n}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Entity; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__key__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Entity = function () {\n  function Entity(componentCount, componentIdMap, onKeyChanged) {\n    _classCallCheck(this, Entity);\n\n    this.components = [];\n    for (var i = 0; i < componentCount; i++) {\n      this.components.push(null);\n    }\n    this.componentIdMap = componentIdMap;\n    this.key = new __WEBPACK_IMPORTED_MODULE_0__key__[\"a\" /* Key */](componentCount);\n\n    this.prev = null;\n    this.next = null;\n\n    this.keyChangeAnnounced = false;\n    this.onKeyChanged = onKeyChanged;\n  }\n\n  _createClass(Entity, [{\n    key: 'add',\n    value: function add(component) {\n      var index = this.getIndexById(component._id);\n      if (this.components[index]) {\n        throw new Error('Cannot add another instance of the same component.');\n      }\n      this.key.setBit(index, true);\n      this.components[index] = component;\n      this.onChange();\n      return this;\n    }\n  }, {\n    key: 'has',\n    value: function has(Component) {\n      var index = this.getIndexById(Component.id);\n      return this.components[index] ? true : false;\n    }\n  }, {\n    key: 'get',\n    value: function get(Component) {\n      var index = this.getIndexById(Component.id);\n      var component = this.components[index];\n      if (!component) {\n        throw new Error('Requested component is not present.');\n      }\n      return component;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(Component) {\n      var index = this.getIndexById(Component.id);\n      var component = this.components[index];\n      if (!component) {\n        throw new Error('Cannot remove component instance, because it doesn\\'t  exist on target entity.');\n      }\n      Component.destroy(component);\n      this.key.setBit(index, false);\n      this.components[index] = null;\n      this.onChange();\n      return this;\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange() {\n      if (!this.keyChangeAnnounced) {\n        this.onKeyChanged(this);\n      }\n      this.keyChangeAnnounced = true;\n    }\n  }, {\n    key: 'resetOnKeyChanged',\n    value: function resetOnKeyChanged() {\n      this.keyChangeAnnounced = false;\n    }\n  }, {\n    key: 'getIndexById',\n    value: function getIndexById(componentId) {\n      var index = this.componentIdMap[componentId];\n      if (index === undefined) {\n        throw new Error('Unknown component passed as argument. Components not included in queries should be manually' + ' registered using Engine.registerComponent().');\n      }\n      return index;\n    }\n  }]);\n\n  return Entity;\n}();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Key; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KEY_BITS = 31;\n\nvar POWERS = [];\nfor (var i = 0; i < KEY_BITS; i++) {\n  POWERS[i] = Math.pow(2, i);\n}\n\nvar Key = function () {\n  function Key(length) {\n    _classCallCheck(this, Key);\n\n    this.values = [];\n    for (var _i = 0; _i < length / KEY_BITS; _i++) {\n      this.values.push(0);\n    }\n  }\n\n  _createClass(Key, [{\n    key: \"set\",\n    value: function set(index) {\n      this.setBit(index, true);\n      return this;\n    }\n  }, {\n    key: \"unset\",\n    value: function unset(index) {\n      this.setBit(index, false);\n      return this;\n    }\n  }, {\n    key: \"setBit\",\n    value: function setBit(index, value) {\n      var valueIndex = 0;\n      while (index >= KEY_BITS) {\n        valueIndex++;\n        index -= KEY_BITS;\n      }\n\n      var previousValue = (this.values[valueIndex] & POWERS[index]) !== 0;\n      if (value && !previousValue) {\n        this.values[valueIndex] += POWERS[index];\n      } else if (!value && previousValue) {\n        this.values[valueIndex] -= POWERS[index];\n      }\n    }\n  }, {\n    key: \"matches\",\n    value: function matches(other) {\n      for (var _i2 = 0; _i2 < other.values.length; _i2++) {\n        var currentValue = this.values[_i2] || 0;\n        var otherValue = other.values[_i2];\n        if ((currentValue & otherValue) !== otherValue) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }]);\n\n  return Key;\n}();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = component;\nvar index = 0;\n\nfunction component(objectConstructor, objectDestructor) {\n  var id = index++;\n  objectConstructor.id = id;\n  objectConstructor.prototype._id = id;\n\n  objectConstructor.destroy = function (instance) {\n    if (objectDestructor) {\n      objectDestructor.apply(instance);\n    }\n  };\n\n  return objectConstructor;\n}\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// ouyo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 833b366967ce045f9a03","import { Entity } from './entity'\n\nexport class Engine {\n  constructor() {\n    this.entities = null\n    this.dirtyEntites = []\n    this.queries = []\n    this.systems = []\n    this.componentIdMap = []\n    this.componentsCount = 0\n\n    this.onEntityKeyChange = this.onEntityKeyChange.bind(this)\n  }\n\n  createEntity() {\n    const entity = new Entity(\n      this.componentsCount,\n      this.componentIdMap,\n      this.onEntityKeyChange\n    )\n    entity.next = this.entities\n    this.entities = entity\n\n    return entity\n  }\n\n  removeEntity(entity) {\n    const next = entity.next\n\n    if(entity.next !== null) {\n      entity.next.prev = entity.prev\n      entity.next = null\n    }\n\n    if(entity.prev !== null) {\n      entity.prev.next = entity.next\n      entity.prev = null\n    }\n\n    if(this.entities = entity) {\n      this.entities = next\n    }\n  }\n\n  onEntityKeyChange(entity) {\n    this.dirtyEntites.push(entity)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine.js","import { Key } from './key'\n\nexport class Entity {\n  constructor(componentCount, componentIdMap, onKeyChanged) {\n    this.components = []\n    for(let i = 0; i < componentCount; i++) {\n      this.components.push(null)\n    }\n    this.componentIdMap = componentIdMap\n    this.key = new Key(componentCount)\n\n    this.prev = null\n    this.next = null\n\n    this.keyChangeAnnounced = false\n    this.onKeyChanged = onKeyChanged\n  }\n\n  add(component) {\n    const index = this.getIndexById(component._id)\n    if(this.components[index]) {\n      throw new Error('Cannot add another instance of the same component.')\n    }\n    this.key.setBit(index, true)\n    this.components[index] = component\n    this.onChange()\n    return this\n  }\n\n  has(Component) {\n    const index = this.getIndexById(Component.id)\n    return this.components[index] ? true : false\n  }\n\n  get(Component) {\n    const index = this.getIndexById(Component.id)\n    const component = this.components[index]\n    if(!component) {\n      throw new Error('Requested component is not present.')\n    }\n    return component\n  }\n\n  remove(Component) {\n    const index = this.getIndexById(Component.id)\n    const component = this.components[index]\n    if(!component) {\n      throw new Error('Cannot remove component instance, because it doesn\\'t  exist on target entity.')\n    }\n    Component.destroy(component)\n    this.key.setBit(index, false)\n    this.components[index] = null\n    this.onChange()\n    return this\n  }\n\n  onChange() {\n    if(!this.keyChangeAnnounced) {\n      this.onKeyChanged(this)\n    }\n    this.keyChangeAnnounced = true\n  }\n\n  resetOnKeyChanged() {\n    this.keyChangeAnnounced = false\n  }\n\n  getIndexById(componentId) {\n    const index = this.componentIdMap[componentId]\n    if(index === undefined) {\n      throw new Error('Unknown component passed as argument. Components not included in queries should be manually' +\n        ' registered using Engine.registerComponent().')\n    }\n    return index\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity.js","const KEY_BITS = 31\r\n\r\nconst POWERS = []\r\nfor(let i = 0; i < KEY_BITS; i++) {\r\n  POWERS[i] = 2 ** i\r\n}\r\n\r\nexport class Key {\r\n  constructor(length) {\r\n    this.values = []\r\n    for(let i = 0; i < length / KEY_BITS; i++) {\r\n      this.values.push(0)\r\n    }\r\n  }\r\n\r\n  set(index) {\r\n    this.setBit(index, true)\r\n    return this\r\n  }\r\n\r\n  unset(index) {\r\n    this.setBit(index, false)\r\n    return this\r\n  }\r\n\r\n  setBit(index, value) {\r\n    let valueIndex = 0\r\n    while(index >= KEY_BITS) {\r\n      valueIndex++\r\n      index -= KEY_BITS\r\n    }\r\n\r\n    const previousValue = (this.values[valueIndex] & POWERS[index]) !== 0\r\n    if(value && !previousValue) {\r\n      this.values[valueIndex] += POWERS[index]\r\n    } else if(!value && previousValue) {\r\n      this.values[valueIndex] -= POWERS[index]\r\n    }\r\n  }\r\n\r\n  matches(other) {\r\n    for(let i = 0; i < other.values.length; i++) {\r\n      const currentValue = this.values[i] || 0\r\n      const otherValue = other.values[i]\r\n      if((currentValue & otherValue) !== otherValue) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/key.js","let index = 0\r\n\r\nexport function component(objectConstructor, objectDestructor) {\r\n  const id = index++\n  objectConstructor.id = id\n  objectConstructor.prototype._id = id\n\n  objectConstructor.destroy = function(instance) {\n    if(objectDestructor) {\n      objectDestructor.apply(instance)\n    }\n  }\n\r\n  return objectConstructor\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js"],"sourceRoot":""}