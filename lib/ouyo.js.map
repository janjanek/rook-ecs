{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///ouyo.js","webpack:///webpack/bootstrap cdbc396f3d0dd8f27af5","webpack:///./src/engine.js","webpack:///./src/entity.js","webpack:///./src/key.js","webpack:///./src/component.js","webpack:///./src/objectpool.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__engine__","__WEBPACK_IMPORTED_MODULE_1__component__","_classCallCheck","instance","Constructor","TypeError","Engine","__WEBPACK_IMPORTED_MODULE_0__entity__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","entities","dirtyEntites","queries","addToDirty","bind","entity","push","next","prev","isComponentClass","undefined","index","Entity","__WEBPACK_IMPORTED_MODULE_0__key__","_ref","componentIdMap","onKeyChanged","components","keyChangeAnnounced","componentInstance","_componentId","setBit","componentClass","Error","component","setDirty","dirty","announceDirty","Key","POWERS","Math","pow","indices","arguments","values","valueIndex","previousValue","other","currentValue","otherValue","objectConstructor","objectDestructor","pool","__WEBPACK_IMPORTED_MODULE_0__objectpool__","id","create","isEmpty","Function","apply","concat","Array","slice","destroy","put","ObjectPool","objects","pop"],"mappings":"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","file":"ouyo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__engine__ = __webpack_require__(1);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Engine\", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__component__ = __webpack_require__(4);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"component\", function() { return __WEBPACK_IMPORTED_MODULE_1__component__[\"a\"]; });\n\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Engine; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__entity__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Engine = function () {\n  function Engine() {\n    _classCallCheck(this, Engine);\n\n    this.entities = null;\n    this.dirtyEntites = [];\n    this.queries = [];\n\n    this.addToDirty = this.addToDirty.bind(this);\n  }\n\n  _createClass(Engine, [{\n    key: 'createEntity',\n    value: function createEntity() {\n      var entity = new __WEBPACK_IMPORTED_MODULE_0__entity__[\"a\" /* Entity */](this.entities, this.addToDirty);\n      this.entities = entity;\n\n      return entity;\n    }\n  }, {\n    key: 'addToDirty',\n    value: function addToDirty(entity) {\n      this.dirtyEntites.push(entity);\n    }\n  }, {\n    key: 'removeEntity',\n    value: function removeEntity(entity) {\n      var next = entity.next;\n\n      if (entity.next !== null) {\n        entity.next.prev = entity.prev;\n        entity.next = null;\n      }\n\n      if (entity.prev !== null) {\n        entity.prev.next = entity.next;\n        entity.prev = null;\n      }\n\n      if (this.entities = entity) {\n        this.entities = next;\n      }\n    }\n  }]);\n\n  return Engine;\n}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Entity; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__key__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Entity = function () {\n  function Entity(_ref) {\n    var componentIdMap = _ref.componentIdMap,\n        onKeyChanged = _ref.onKeyChanged;\n\n    _classCallCheck(this, Entity);\n\n    this.components = [];\n    this.componentIdMap = componentIdMap;\n    this.key = new __WEBPACK_IMPORTED_MODULE_0__key__[\"a\" /* Key */]();\n\n    this.prev = null;\n    this.next = null;\n\n    this.keyChangeAnnounced = false;\n    this.onKeyChanged = onKeyChanged;\n  }\n\n  _createClass(Entity, [{\n    key: 'add',\n    value: function add(componentInstance) {\n      var id = this.componentIdMap[componentInstance._componentId];\n      if (this.components[index]) {\n        throw 'Entity.add(): Component already present';\n      }\n      this.key.setBit(index, true);\n      this.components[index] = componentInstance;\n      return this;\n    }\n  }, {\n    key: 'get',\n    value: function get(componentClass) {\n      if (!isComponentClass(componentClass)) {\n        throw new Error('Entity.get(): Argument is not a component class');\n      }\n\n      var component = this.components[componentClass.index];\n      if (!component) {\n        throw new Error('Entity.get(): Requested component is not present');\n      }\n\n      return component;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(componentClass) {\n      var index = componentClass.index;\n      if (this.components[index]) {\n        this.setDirty(true);\n      }\n      this.key.setBit(index, false);\n      this.components[index] = null;\n      return this;\n    }\n  }, {\n    key: 'setDirty',\n    value: function setDirty(value) {\n      if (!this.dirty && value) {\n        this.announceDirty(this);\n      }\n      this.dirty = value;\n    }\n  }]);\n\n  return Entity;\n}();\n\nfunction isComponentClass(value) {\n  return value && value.index !== undefined;\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Key; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KEY_BITS = 31;\n\nvar POWERS = [];\nfor (var i = 0; i < KEY_BITS; i++) {\n  POWERS[i] = Math.pow(2, i);\n}\n\nvar Key = function () {\n  function Key() {\n    var indices = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Key);\n\n    this.values = [];\n    for (var _i = 0; _i < indices.length; _i++) {\n      this.setBit(indices[_i], true);\n    }\n  }\n\n  _createClass(Key, [{\n    key: \"setBit\",\n    value: function setBit(index, value) {\n      while (this.values.length * KEY_BITS <= index) {\n        this.values.push(0);\n      }\n\n      var valueIndex = 0;\n      while (index >= KEY_BITS) {\n        valueIndex++;\n        index -= KEY_BITS;\n      }\n\n      var previousValue = (this.values[valueIndex] & POWERS[index]) !== 0;\n      if (value && !previousValue) {\n        this.values[valueIndex] += POWERS[index];\n      } else if (!value && previousValue) {\n        this.values[valueIndex] -= POWERS[index];\n      }\n    }\n  }, {\n    key: \"matches\",\n    value: function matches(other) {\n      for (var _i2 = 0; _i2 < other.values.length; _i2++) {\n        var currentValue = this.values[_i2] || 0;\n        var otherValue = other.values[_i2];\n        if ((currentValue & otherValue) !== otherValue) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }]);\n\n  return Key;\n}();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = component;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__objectpool__ = __webpack_require__(5);\n\n\nvar index = 0;\n\nfunction component(objectConstructor, objectDestructor) {\n  var pool = new __WEBPACK_IMPORTED_MODULE_0__objectpool__[\"a\" /* ObjectPool */](objectConstructor);\n\n  var component = {\n    id: index++,\n\n    create: function create() {\n      if (pool.isEmpty()) {\n        return new (Function.prototype.bind.apply(objectConstructor, [null].concat(Array.prototype.slice.call(arguments))))();\n      } else {\n        var instance = pool.get();\n        objectConstructor.apply(instance, arguments);\n        return instance;\n      }\n    },\n    destroy: function destroy(instance) {\n      if (objectDestructor) {\n        objectDestructor.apply(instance);\n      }\n      pool.put(instance);\n    }\n  };\n\n  objectConstructor.prototype._componentId = component.id;\n\n  return component;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ObjectPool; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ObjectPool = function () {\n  function ObjectPool() {\n    _classCallCheck(this, ObjectPool);\n\n    this.objects = [];\n  }\n\n  _createClass(ObjectPool, [{\n    key: \"put\",\n    value: function put(object) {\n      this.objects.push(object);\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.objects.pop(object);\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this.objects.length === 0;\n    }\n  }]);\n\n  return ObjectPool;\n}();\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// ouyo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cdbc396f3d0dd8f27af5","import { Entity } from './entity'\n\nexport class Engine {\n  constructor() {\n    this.entities = null\n    this.dirtyEntites = []\n    this.queries = []\n\n    this.addToDirty = this.addToDirty.bind(this)\n  }\n\n  createEntity() {\n    const entity = new Entity(this.entities, this.addToDirty)\n    this.entities = entity\n\n    return entity\n  }\n\n  addToDirty(entity) {\n    this.dirtyEntites.push(entity)\n  }\n\n  removeEntity(entity) {\n    const next = entity.next\n\n    if(entity.next !== null) {\n      entity.next.prev = entity.prev\n      entity.next = null\n    }\n\n    if(entity.prev !== null) {\n      entity.prev.next = entity.next\n      entity.prev = null\n    }\n\n    if(this.entities = entity) {\n      this.entities = next\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine.js","import { Key } from './key'\n\nexport class Entity {\n  constructor({ componentIdMap, onKeyChanged }) {\n    this.components = []\n    this.componentIdMap = componentIdMap\n    this.key = new Key()\n\n    this.prev = null\n    this.next = null\n\n    this.keyChangeAnnounced = false\n    this.onKeyChanged = onKeyChanged\n  }\n\n  add(componentInstance) {\n    const id = this.componentIdMap[componentInstance._componentId]\n    if(this.components[index]) {\n      throw 'Entity.add(): Component already present'\n    }\n    this.key.setBit(index, true)\n    this.components[index] = componentInstance\n    return this\n  }\n\n  get(componentClass) {\n    if(!isComponentClass(componentClass)) {\n      throw new Error('Entity.get(): Argument is not a component class')\n    }\n\n    const component = this.components[componentClass.index]\n    if(!component) {\n      throw new Error('Entity.get(): Requested component is not present')\n    }\n\n    return component\n  }\n\n  remove(componentClass) {\n    const index = componentClass.index\n    if(this.components[index]) {\n      this.setDirty(true)\n    }\n    this.key.setBit(index, false)\n    this.components[index] = null\n    return this\n  }\n\n  setDirty(value) {\n    if(!this.dirty && value) {\n      this.announceDirty(this)\n    }\n    this.dirty = value\n  }\n}\n\nfunction isComponentClass(value) {\n  return value && value.index !== undefined\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity.js","const KEY_BITS = 31\n\nconst POWERS = []\nfor(let i = 0; i < KEY_BITS; i++) {\n  POWERS[i] = 2 ** i\n}\n\nexport class Key {\n  constructor(indices = []) {\n    this.values = []\n    for(let i = 0; i < indices.length; i++) {\n      this.setBit(indices[i], true)\n    }\n  }\n\n  setBit(index, value) {\n    while(this.values.length * KEY_BITS <= index) {\n      this.values.push(0)\n    }\n\n    let valueIndex = 0\n    while(index >= KEY_BITS) {\n      valueIndex++\n      index -= KEY_BITS\n    }\n\n    const previousValue = (this.values[valueIndex] & POWERS[index]) !== 0\n    if(value && !previousValue) {\n      this.values[valueIndex] += POWERS[index]\n    } else if(!value && previousValue) {\n      this.values[valueIndex] -= POWERS[index]\n    }\n  }\n\n  matches(other) {\n    for(let i = 0; i < other.values.length; i++) {\n      const currentValue = this.values[i] || 0\n      const otherValue = other.values[i]\n      if((currentValue & otherValue) !== otherValue) {\n        return false\n      }\n    }\n    return true\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/key.js","import { ObjectPool } from './objectpool'\n\nlet index = 0\n\nexport function component(objectConstructor, objectDestructor) {\n  const pool = new ObjectPool(objectConstructor)\n\n  const component = {\n    id: index++,\n\n    create() {\n      if(pool.isEmpty()) {\n        return new objectConstructor(...arguments)\n      } else {\n        const instance = pool.get()\n        objectConstructor.apply(instance, arguments)\n        return instance\n      }\n    },\n\n    destroy(instance) {\n      if(objectDestructor) {\n        objectDestructor.apply(instance)\n      }\n      pool.put(instance)\n    }\n  }\n\n  objectConstructor.prototype._componentId = component.id\n\n  return component\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js","export class ObjectPool {\n  constructor() {\n    this.objects = []\n  }\n\n  put(object) {\n    this.objects.push(object)\n  }\n\n  get() {\n    return this.objects.pop(object)\n  }\n\n  isEmpty() {\n    return this.objects.length === 0\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/objectpool.js"],"sourceRoot":""}