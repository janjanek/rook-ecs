{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///ouyo.js","webpack:///webpack/bootstrap 5edfb8c0a24fe9d183f8","webpack:///./src/engine.js","webpack:///./src/entity.js","webpack:///./src/key.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__engine__","_classCallCheck","instance","Constructor","TypeError","Engine","__WEBPACK_IMPORTED_MODULE_0__entity__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","entities","dirtyEntites","addToDirty","bind","entity","next","prev","push","Entity","__WEBPACK_IMPORTED_MODULE_0__key__","announceDirty","components","dirty","component","index","__proto__","constructor","setDirty","setBit","componentClass","matches","Key","POWERS","Math","pow","indices","arguments","undefined","values","valueIndex","previousValue","other","currentValue","otherValue"],"mappings":"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","file":"ouyo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__engine__ = __webpack_require__(1);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Engine\", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__[\"a\"]; });\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Engine; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__entity__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Engine = function () {\n  function Engine() {\n    _classCallCheck(this, Engine);\n\n    this.entities = null;\n    this.dirtyEntites = [];\n\n    this.addToDirty = this.addToDirty.bind(this);\n  }\n\n  _createClass(Engine, [{\n    key: 'createEntity',\n    value: function createEntity() {\n      var entity = new __WEBPACK_IMPORTED_MODULE_0__entity__[\"a\" /* Entity */](this.entities, this.addToDirty);\n      this.entities = entity;\n\n      return entity;\n    }\n  }, {\n    key: 'removeEntity',\n    value: function removeEntity(entity) {\n      var next = entity.next;\n\n      if (entity.next !== null) {\n        entity.next.prev = entity.prev;\n        entity.next = null;\n      }\n\n      if (entity.prev !== null) {\n        entity.prev.next = entity.next;\n        entity.prev = null;\n      }\n\n      if (this.entities = entity) {\n        this.entities = next;\n      }\n    }\n  }, {\n    key: 'addToDirty',\n    value: function addToDirty(entity) {\n      this.dirtyEntites.push(entity);\n    }\n  }]);\n\n  return Engine;\n}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Entity; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__key__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Entity = function () {\n  function Entity(next, announceDirty) {\n    _classCallCheck(this, Entity);\n\n    this.prev = null;\n    this.next = next;\n\n    this.components = [];\n    this.key = new __WEBPACK_IMPORTED_MODULE_0__key__[\"a\" /* Key */]();\n\n    this.dirty = false;\n    this.announceDirty = announceDirty;\n  }\n\n  _createClass(Entity, [{\n    key: 'addComponent',\n    value: function addComponent(component) {\n      var index = component.__proto__.constructor.index;\n      if (!this.components[index]) {\n        this.setDirty(true);\n      }\n      this.key.setBit(index, true);\n      this.components[index] = component;\n      return this;\n    }\n  }, {\n    key: 'removeComponent',\n    value: function removeComponent(componentClass) {\n      var index = componentClass.index;\n      if (this.components[index]) {\n        this.setDirty(true);\n      }\n      this.key.setBit(index, false);\n      this.components[index] = null;\n      return this;\n    }\n  }, {\n    key: 'matches',\n    value: function matches(key) {\n      return this.key.matches(key);\n    }\n  }, {\n    key: 'setDirty',\n    value: function setDirty(value) {\n      if (!this.dirty && value) {\n        this.announceDirty(this);\n      }\n      this.dirty = value;\n    }\n  }]);\n\n  return Entity;\n}();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Key; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KEY_BITS = 31;\n\nvar POWERS = [];\nfor (var i = 0; i < KEY_BITS; i++) {\n  POWERS[i] = Math.pow(2, i);\n}\n\nvar Key = function () {\n  function Key() {\n    var indices = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Key);\n\n    this.values = [];\n    for (var _i = 0; _i < indices.length; _i++) {\n      this.setBit(indices[_i], true);\n    }\n  }\n\n  _createClass(Key, [{\n    key: \"setBit\",\n    value: function setBit(index, value) {\n      while (this.values.length * KEY_BITS <= index) {\n        this.values.push(0);\n      }\n\n      var valueIndex = 0;\n      while (index >= KEY_BITS) {\n        valueIndex++;\n        index -= KEY_BITS;\n      }\n\n      var previousValue = (this.values[valueIndex] & POWERS[index]) !== 0;\n      if (value && !previousValue) {\n        this.values[valueIndex] += POWERS[index];\n      } else if (!value && previousValue) {\n        this.values[valueIndex] -= POWERS[index];\n      }\n    }\n  }, {\n    key: \"matches\",\n    value: function matches(other) {\n      for (var _i2 = 0; _i2 < other.values.length; _i2++) {\n        var currentValue = this.values[_i2] || 0;\n        var otherValue = other.values[_i2];\n        if ((currentValue & otherValue) !== otherValue) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }]);\n\n  return Key;\n}();\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// ouyo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5edfb8c0a24fe9d183f8","import { Entity } from './entity'\n\nexport class Engine {\n  constructor() {\n    this.entities = null\n    this.dirtyEntites = []\n\n    this.addToDirty = this.addToDirty.bind(this)\n  }\n\n  createEntity() {\n    const entity = new Entity(this.entities, this.addToDirty)\n    this.entities = entity\n\n    return entity\n  }\n\n  removeEntity(entity) {\n    const next = entity.next\n\n    if(entity.next !== null) {\n      entity.next.prev = entity.prev\n      entity.next = null\n    }\n\n    if(entity.prev !== null) {\n      entity.prev.next = entity.next\n      entity.prev = null\n    }\n\n    if(this.entities = entity) {\n      this.entities = next\n    }\n  }\n\n  addToDirty(entity) {\n    this.dirtyEntites.push(entity)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine.js","import { Key } from './key'\n\nexport class Entity {\n  constructor(next, announceDirty) {\n    this.prev = null\n    this.next = next\n\n    this.components = []\n    this.key = new Key()\n\n    this.dirty = false\n    this.announceDirty = announceDirty\n  }\n\n  addComponent(component) {\n    const index = component.__proto__.constructor.index\n    if(!this.components[index]) {\n      this.setDirty(true)\n    }\n    this.key.setBit(index, true)\n    this.components[index] = component\n    return this\n  }\n\n  removeComponent(componentClass) {\n    const index = componentClass.index\n    if(this.components[index]) {\n      this.setDirty(true)\n    }\n    this.key.setBit(index, false)\n    this.components[index] = null\n    return this\n  }\n\n  matches(key) {\n    return this.key.matches(key)\n  }\n\n  setDirty(value) {\n    if(!this.dirty && value) {\n      this.announceDirty(this)\n    }\n    this.dirty = value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity.js","const KEY_BITS = 31\n\nconst POWERS = []\nfor(let i = 0; i < KEY_BITS; i++) {\n  POWERS[i] = 2 ** i\n}\n\nexport class Key {\n  constructor(indices = []) {\n    this.values = []\n    for(let i = 0; i < indices.length; i++) {\n      this.setBit(indices[i], true)\n    }\n  }\n\n  setBit(index, value) {\n    while(this.values.length * KEY_BITS <= index) {\n      this.values.push(0)\n    }\n\n    let valueIndex = 0\n    while(index >= KEY_BITS) {\n      valueIndex++\n      index -= KEY_BITS\n    }\n\n    const previousValue = (this.values[valueIndex] & POWERS[index]) !== 0\n    if(value && !previousValue) {\n      this.values[valueIndex] += POWERS[index]\n    } else if(!value && previousValue) {\n      this.values[valueIndex] -= POWERS[index]\n    }\n  }\n\n  matches(other) {\n    for(let i = 0; i < other.values.length; i++) {\n      const currentValue = this.values[i] || 0\n      const otherValue = other.values[i]\n      if((currentValue & otherValue) !== otherValue) {\n        return false\n      }\n    }\n    return true\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/key.js"],"sourceRoot":""}