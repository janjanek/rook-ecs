{"version":3,"sources":["webpack://OUYO/webpack/universalModuleDefinition","webpack://OUYO/webpack/bootstrap","webpack://OUYO/./src/Events.js","webpack://OUYO/./src/assert.js","webpack://OUYO/./src/Query.js","webpack://OUYO/./src/Entity.js","webpack://OUYO/./src/World.js","webpack://OUYO/./src/Game.js","webpack://OUYO/./src/selectors.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Events","_classCallCheck","this","_events","_eventTimes","_createClass","key","event","time","type","lastTime","timeDelta","push","eventType","filter","length","assert","condition","errorMessage","Error","Query_Query","Query","selector","Query_classCallCheck","_selector","entities","Set","Query_createClass","entity","add","delete","Entity_Entity","Entity","registerChange","Entity_classCallCheck","_components","create","_changeRegistered","_registerChange","Entity_createClass","instance","Component","constructor","id","_onChange","component","undefined","World_World","World","game","World_classCallCheck","_game","World_createClass","assemblage","_onEntityChange","_removedEntities","emit","Game_Game","Game","_this","Game_classCallCheck","_systems","_queries","_changedEntities","_time","_world","Game_createClass","systems","map","system","query","on","process","processEntity","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","Symbol","iterator","next","done","err","return","callback","clear","_runSystems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_handleChanges","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","onChange","_onChangeRegistered","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","onRemove","hasAll","_len","arguments","components","Array","_key","every","isComponent","has","hasAny","_len2","_key2","some"],"mappings":"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","file":"ouyo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OUYO\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OUYO\"] = factory();\n\telse\n\t\troot[\"OUYO\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class Events {\n  constructor () {\n    this._events = []\n    this._eventTimes = {}\n  }\n\n  emit (event, time) {\n    if (typeof event === 'string') {\n      event = { type: event }\n    }\n    const lastTime = this._eventTimes[event.type] != null\n      ? this._eventTimes[event.type]\n      : time\n\n    event.timeDelta = time - lastTime\n    this._eventTimes[event.type] = time\n    this._events.push(event)\n  }\n\n  get (eventType) {\n    return this._events.filter(\n      event => event.type === eventType\n    )\n  }\n\n  clear () {\n    this._events.length = 0\n  }\n}\n","export function assert (condition, errorMessage) {\n  if (!condition) {\n    throw new Error(errorMessage)\n  }\n}\n","import { assert } from './assert'\n\nexport class Query {\n  constructor (selector) {\n    assert(typeof selector === 'function', 'new Query :: selector must be a function')\n    this._selector = selector\n    this.entities = new Set()\n  }\n\n  onChange (entity) {\n    if (this._selector(entity)) {\n      this.entities.add(entity)\n    } else {\n      this.entities.delete(entity)\n    }\n  }\n\n  onRemove (entity) {\n    this.entities.delete(entity)\n  }\n}\n","import { assert } from './assert'\n\nexport class Entity {\n  constructor (registerChange) {\n    this._components = Object.create(null)\n    this._changeRegistered = false\n    this._registerChange = registerChange\n  }\n\n  add (instance) {\n    assert(instance != null, 'Entity.add :: Argument is not a component instance.')\n\n    const Component = instance.constructor\n\n    assert(Component && Component.id, 'Entity.add :: Argument is not a component instance.')\n    assert(!this._components[Component.id], 'Entity.add :: Component already present.')\n\n    this._components[Component.id] = instance\n    this._onChange()\n\n    return this\n  }\n\n  has (Component) {\n    assert(Component && Component.id, 'Entity.has :: Argument is not a component.')\n    return !!this._components[Component.id]\n  }\n\n  get (Component) {\n    assert(Component && Component.id, 'Entity.get :: Argument is not a component.')\n    const component = this._components[Component.id]\n    assert(component, 'Entity.get :: Component not present.')\n    return component\n  }\n\n  remove (Component) {\n    assert(Component && Component.id, 'Entity.remove :: Argument is not a component.')\n\n    this._components[Component.id] = undefined\n    this._onChange()\n\n    return this\n  }\n\n  _onChange () {\n    if (!this._changeRegistered) {\n      this._registerChange(this)\n    }\n    this._changeRegistered = true\n  }\n\n  _onChangeRegistered () {\n    this._changeRegistered = false\n  }\n}\n","import { Entity } from './Entity'\n\nexport class World {\n  constructor (game) {\n    this._game = game\n  }\n\n  createEntity (assemblage) {\n    const entity = new Entity(this._game._onEntityChange)\n    if (assemblage) {\n      assemblage(entity)\n    }\n    return entity\n  }\n\n  removeEntity (entity) {\n    this._game._removedEntities.push(entity)\n  }\n\n  emit (event) {\n    this._game._events.emit(event)\n  }\n}\n","import { Events } from './Events'\nimport { Query } from './Query'\nimport { assert } from './assert'\nimport { World } from './World'\n\nexport class Game {\n  constructor () {\n    this._systems = []\n    this._queries = []\n    this._events = new Events()\n\n    this._changedEntities = []\n    this._removedEntities = []\n    this._onEntityChange = entity => this._changedEntities.push(entity)\n\n    this._time = null\n    this._world = new World(this)\n  }\n\n  registerSystems (systems) {\n    this._systems = systems.map(system => ({\n      query: system.query && new Query(system.query),\n      on: system.on || 'tick',\n      process: system.process || createProcess(system.processEntity)\n    }))\n    this._queries = this._systems\n      .map(system => system.query)\n      .filter(query => !!query)\n  }\n\n  init (time, callback) {\n    assert(this._time === null, 'Game.init :: Game can only be initialized once.')\n    this._time = time\n    callback(this._world)\n  }\n\n  update (time) {\n    const timeDelta = time - this._time\n    this._time = time\n\n    this._events.clear()\n    this._events.emit('tick', this._time)\n\n    this._runSystems(timeDelta)\n  }\n\n  _runSystems (timeDelta) {\n    for (const system of this._systems) {\n      for (const event of this._events.get(system.on)) {\n        this._handleChanges()\n        system.process(\n          system.query && system.query.entities,\n          event,\n          this._world\n        )\n      }\n    }\n  }\n\n  _handleChanges () {\n    for (const entity of this._changedEntities) {\n      for (const query of this._queries) {\n        query.onChange(entity)\n      }\n      entity._onChangeRegistered()\n    }\n    this._changedEntities.length = 0\n\n    for (const entity of this._removedEntities) {\n      for (const query of this._queries) {\n        query.onRemove(entity)\n      }\n    }\n    this._removedEntities.length = 0\n  }\n}\n\nfunction createProcess (processEntity) {\n  return function (entities, event, game) {\n    for (const entity of entities) {\n      processEntity(entity, event, game)\n    }\n  }\n}\n","import { assert } from './assert'\n\nexport function hasAll (...components) {\n  assert(components.every(isComponent), 'hasAll :: All arguments must be components.')\n  return entity => components.every(\n    component => entity.has(component)\n  )\n}\n\nexport function hasAny (...components) {\n  assert(components.every(isComponent), 'hasAny :: All arguments must be components.')\n  return entity => components.some(\n    component => entity.has(component)\n  )\n}\n\nfunction isComponent (Component) {\n  return Component && Component.id\n}\n"],"sourceRoot":""}